<!DOCTYPE html>
<html>
  {% block content %}
  <head>
    <style>
      div{
        display: inline-block;
      }
      .info div {
        width: 220px;
        padding: 1px;
        border: 2px solid gray;
        margin: 10 px;
        white-space: pre-wrap;
        display: block;
        text-align: left;
        font-size: 10px;
      }  

      A{
	      text-decoration: none;
        color: black;
       }
       </style>
    <title> Book Exchange </title>
  </head>
  <body>
    {% include 'header.html' %}
    <h1> Search Results </h1>
    <br>
    {% if results is not none: %}
        {%  for dict in results %}
        <div class="info">
          {% set url = "buyerPage?bookid=" + dict["uniqueId"] %}
          <a href={{url}} method='POST'><img src="{{images[dict['images']]}}" width="225" height="160"></a> 
          <div>
            <a href={{url}} method='POST'> Book title: {{dict["title"]}}
              Course Code: {{dict["crscode"]}}
              Min price: {{dict["minPrice"]}} ...</a>
          </div>
        </div>
        {% endfor %}
    {% else: %}
       <h4> No Books Found </h4>
      

    {% endif %}

    {% include 'footer.html' %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    
    <script>
      console.log("before setQuery");
      function setQuery() {
        query1 = "" + "{{query|safe}}";
        let query = $('#searchQuery');

        query.val(query1);

        var searchType = "{{searchType|safe}}";
        console.log(searchType);
        let dropDown = $('#searchType1');
        if (searchType == 1){
          dropDown.val("isbn");
        }
        else if (searchType == 2){
          console.log("inside #2")
          dropDown.val("title");
        }
        else if(searchType == 3){
          dropDown.val("crsname");
        }
        else if(searchType == 4){
          dropDown.val("crstitle");
        }

      }
      function setup(){
        $('#searchQuery').focus()
        setQuery();
      }

      $('document').ready(setup);
    </script>
  </body>
  {% endblock content %}
</html>
